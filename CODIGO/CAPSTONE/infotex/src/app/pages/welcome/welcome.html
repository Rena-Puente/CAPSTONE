<section class="welcome py-5 py-lg-6">
  <div class="welcome__container container">
    <div
      class="welcome__banner alert alert-success d-flex align-items-center gap-3"
      *ngIf="passwordResetBannerMessage()"
      role="status"
    >
      <span class="welcome__banner-icon" aria-hidden="true">üîí</span>
      <div class="welcome__banner-message">{{ passwordResetBannerMessage() }}</div>
      <button
        type="button"
        class="btn btn-sm btn-outline-light ms-auto"
        (click)="dismissPasswordResetBanner()"
      >
        Cerrar
      </button>
    </div>
    <div class="row g-4 g-xl-5 align-items-stretch justify-content-center">
      <div class="col-12 col-lg-7 col-xl-8 d-flex">
        <article class="welcome__card card border-0 shadow-lg w-100">
          <div class="card-body p-4 p-md-5">
            <div class="welcome__chips d-flex flex-wrap justify-content-center justify-content-lg-start gap-2 mb-4"
              aria-hidden="true">
              <span class="chip chip--success badge rounded-pill">Beta 2025</span>
              <span class="chip chip--purple badge rounded-pill">Comunidad Dev</span>
              <span class="chip chip--ghost badge rounded-pill">100% gratis</span>
            </div>

            <h1 class="welcome__title display-5 fw-bold text-center text-lg-start">
              Tu plataforma para crecer en tecnolog√≠a
            </h1>
            <p class="welcome__message lead text-center text-lg-start mb-4">
              Crea tu perfil, descubre talento, comparte proyectos y conecta con el mundo tech.
              Inicia sesi√≥n para obtener acceso completo.
            </p>


            <div class="welcome__highlights row row-cols-1 row-cols-sm-3 g-3 g-lg-4 mb-4" aria-hidden="true">
              <div class="col">
                <div class="highlight h-100 text-center text-lg-start">
                  <div class="highlight__value">5K+</div>
                  <div class="highlight__label">Desarrolladores</div>
                </div>
              </div>
              <div class="col">
                <div class="highlight h-100 text-center text-lg-start">
                  <div class="highlight__value">450+</div>
                  <div class="highlight__label">Proyectos</div>
                </div>
              </div>
              <div class="col">
                <div class="highlight h-100 text-center text-lg-start">
                  <div class="highlight__value">120+</div>
                  <div class="highlight__label">Empresas</div>
                </div>
              </div>
            </div>

            <div class="welcome__auth-options d-flex flex-column gap-3 mb-3">
              <div class="welcome__oauth-cta">
                <button type="button" class="welcome__oauth-button"
                  [class.welcome__oauth-button--loading]="githubLoading()" [disabled]="githubLoading()"
                  (click)="continueWithGithub()">
                  <span class="welcome__oauth-spinner" *ngIf="githubLoading()" aria-hidden="true"></span>
                  <span class="welcome__oauth-icon" *ngIf="!githubLoading()" aria-hidden="true">
                    <svg viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                      <path
                        d="M8 0C3.58 0 0 3.58 0 8a8 8 0 0 0 5.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.01.08-2.11 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2.27.63 1.04 2.2.82 2.2.82.44 1.1.16 1.91.08 2.11.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
                    </svg>
                  </span>
                  <span class="welcome__oauth-text">
                    {{ githubLoading() ? 'Conectando con GitHub‚Ä¶' : 'Continuar con GitHub' }}
                  </span>
                </button>
                <p class="welcome__oauth-error" *ngIf="githubErrorMessage() && !isMenuOpen()" role="alert">
                  {{ githubErrorMessage() }}
                </p>
              </div>

              <div
                class="welcome__cta-row d-flex flex-column flex-sm-row gap-3 justify-content-center justify-content-lg-start align-items-stretch align-items-sm-center">
                <button type="button" class="welcome__cta btn btn-success btn-lg px-4" (click)="openMenu('login')">
                  Iniciar sesi√≥n
                </button>
                <div class="welcome__subcta small text-body-primary text-center text-sm-start">
                  ¬øNuevo por aqu√≠? <a href="#" (click)="openMenu('register'); $event.preventDefault()">Crea tu cuenta</a>
                  en 30 segundos.
                </div>
              </div>
            </div>

            <div class="welcome__features row row-cols-1 row-cols-md-3 g-3 g-lg-4" role="list"
              aria-label="Caracter√≠sticas principales">
              <article class="feature col" role="listitem">
                <div class="feature__body h-100">
                  <i class="bi bi-watch"></i>
                  <h3 class="feature__title h5">Matching transparente</h3>
                  <p class="feature__text">
                    Perfiles verificados y ofertas claras. Menos entrevistas eternas, m√°s contrataciones felices.
                  </p>
                </div>
              </article>
              <article class="feature col" role="listitem">
                <div class="feature__body h-100">
                  <i class="bi bi-person-plus"></i>
                  <h3 class="feature__title h5">Comunidad & eventos</h3>
                  <p class="feature__text">Meetups y mentor√≠as para crecer tu red‚Äîy tu repositorio de stickers.</p>
                </div>
              </article>
              <article class="feature col" role="listitem">
                <div class="feature__body h-100">
                  <i class="bi bi-bar-chart-line"></i>
                  <h3 class="feature__title h5">Datos para decidir</h3>
                  <p class="feature__text">Tendencias de skills y salarios para mover tu carrera con cabeza (y con
                    datos).</p>
                </div>
              </article>
            </div>

            <div class="welcome__brands mt-4" aria-label="Empresas que conf√≠an en InfoTex">
              <span class="brands__label text-uppercase small text-body-primary">Confiado por equipos de</span>

              <div class="brands__row d-grid gap-3 gap-sm-4 mt-3" aria-hidden="true">

                <div class="brand-skel">
                  <img src="https://angular.io/assets/images/logos/angular/angular.svg" alt="Angular" title="Angular"
                    class="brand-logo" />
                </div>

                <div class="brand-skel">
                  <img src="https://nodejs.org/static/images/logo.svg" alt="Node.js" title="Node.js"
                    class="brand-logo" />
                </div>

                <div class="brand-skel">
                  <img src="https://logos-world.net/wp-content/uploads/2020/09/Oracle-Logo.png" alt="Oracle"
                    title="Oracle" class="brand-logo" />
                </div>

                <div class="brand-skel">
                  <img src="https://www.docker.com/wp-content/uploads/2022/03/Moby-logo.png" alt="DuocUC" title="DuocUC"
                    class="brand-logo" />
                </div>

                <div class="brand-skel">
                  <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub"
                    title="GitHub" class="brand-logo" />
                </div>

              </div>
            </div>

          </div>
        </article>
      </div>

      <!-- Banner promocional (‚Äúpublicidad‚Äù propia de la plataforma) -->
      <aside class="col-12 col-lg-5 col-xl-4">
        <div class="promo-banner card border-0 h-100" role="complementary" aria-label="Promoci√≥n destacada">
          <div class="promo-banner__content card-body">
            <span class="promo-banner__badge badge rounded-pill bg-warning-subtle text-warning-emphasis">Nuevo</span>
            <h2 class="promo-banner__title h4 fw-semibold mt-3">Hackweek InfoTex ¬∑ Noviembre</h2>
            <p class="promo-banner__text mb-4">
              S√∫mate al desaf√≠o de 7 d√≠as, participa por mentor√≠as y acceso prioritario a vacantes partner.
            </p>
            <div class="promo-banner__actions d-flex flex-column flex-sm-row gap-2">
              <button type="button" class="promo-banner__cta btn btn-outline-light"
                (click)="openMenu()">Participar</button>
              <a routerLink="/about" class="promo-banner__link btn btn-link text-decoration-none p-0">M√°s info</a>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Men√∫ de login (sin cambios funcionales) -->
  <div class="login-menu" *ngIf="isMenuOpen()">
    <div class="login-menu__backdrop" (click)="closeMenu()" aria-hidden="true"></div>
    <div class="login-menu__panel" role="dialog" aria-modal="true" aria-labelledby="loginMenuTitle"
      aria-describedby="loginMenuSubtitle" (click)="$event.stopPropagation()">
      <nav class="login-menu__tabs" role="tablist" class="text-center">
        <button type="button" class="login-menu__tab" [class.login-menu__tab--active]="activeTab() === 'login'"
          (click)="switchToLogin()" role="tab" [attr.aria-selected]="activeTab() === 'login'" aria-controls="loginPanel"
          id="loginTab">
          Iniciar sesi√≥n
        </button>
        <button type="button" class="login-menu__tab" [class.login-menu__tab--active]="activeTab() === 'register'"
          (click)="switchToRegister()" role="tab" [attr.aria-selected]="activeTab() === 'register'"
          aria-controls="registerPanel" id="registerTab">
          Crear cuenta
        </button>
      </nav>
      <br>
      <h2 id="loginMenuTitle" class="text-center">
        {{ activeTab() === 'login' ? 'Bienvenido de nuevo' : 'Crea tu cuenta' }}
      </h2>
      <p class="login-menu__subtitle" id="loginMenuSubtitle">
        {{
        activeTab() === 'login'
        ? 'Introduce tus credenciales para acceder a InfoTex'
        : 'Registra tu correo y una contrase√±a segura para comenzar.'
        }}
      </p>

      <div class="login-menu__success" *ngIf="loginSuccessMessage() && activeTab() === 'login'" role="status">
        {{ loginSuccessMessage() }}
      </div>

      <div *ngIf="activeTab() === 'login'" class="login-menu__oauth" role="group"
        aria-label="Opciones de acceso con redes sociales">
        <button type="button" class="login-menu__oauth-button" [class.login-menu__oauth-button--loading]="githubLoading()"
          [disabled]="githubLoading()" (click)="continueWithGithub()">
          <span class="login-menu__oauth-spinner" *ngIf="githubLoading()" aria-hidden="true"></span>
          <span class="login-menu__oauth-icon" *ngIf="!githubLoading()" aria-hidden="true">
            <svg viewBox="0 0 16 16" aria-hidden="true" focusable="false">
              <path
                d="M8 0C3.58 0 0 3.58 0 8a8 8 0 0 0 5.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.01.08-2.11 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2.27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.91.08 2.11.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
            </svg>
          </span>
          <span class="login-menu__oauth-text">{{ githubLoading() ? 'Conectando‚Ä¶' : 'Continuar con GitHub' }}</span>
        </button>
        <p class="login-menu__oauth-error" *ngIf="githubErrorMessage()" role="alert">{{ githubErrorMessage() }}</p>
      </div>

      <div *ngIf="activeTab() === 'login'" class="login-menu__divider" aria-hidden="true">
        <span>o</span>
      </div>
      <form *ngIf="activeTab() === 'login'" class="login-menu__form" [formGroup]="loginForm" (ngSubmit)="submitLogin()"
        novalidate role="tabpanel" id="loginPanel" aria-labelledby="loginTab">
        <div class="login-menu__field">
          <label for="loginEmail">Correo electr√≥nico</label>
          <input id="loginEmail" type="email" formControlName="email" autocomplete="email"
            [class.is-invalid]="emailControl.invalid && (emailControl.dirty || emailControl.touched)" />
          <span class="login-menu__error"
            *ngIf="emailControl.hasError('required') && (emailControl.dirty || emailControl.touched)">
            El correo es obligatorio.
          </span>
          <span class="login-menu__error" *ngIf="emailControl.hasError('email') && emailControl.touched">
            Ingresa un correo electr√≥nico v√°lido.
          </span>
        </div>

        <div class="login-menu__field">
          <label for="loginPassword">Contrase√±a</label>
          <input id="loginPassword" type="password" formControlName="password" autocomplete="current-password"
            [class.is-invalid]="passwordControl.invalid && (passwordControl.dirty || passwordControl.touched)" />
          <span class="login-menu__error"
            *ngIf="passwordControl.hasError('required') && (passwordControl.dirty || passwordControl.touched)">
            La contrase√±a es obligatoria.
          </span>
          <span class="login-menu__error" *ngIf="passwordControl.hasError('minlength') && passwordControl.touched">
            Debe contener al menos 6 caracteres.
          </span>
        </div>

        <div class="login-menu__options">
          <label class="login-menu__remember">
            <input type="checkbox" />
            <span>Recordarme</span>
          </label>
          <a class="login-menu__link" routerLink="/auth/forgot-password">¬øOlvidaste tu contrase√±a?</a>
        </div>

        <button type="submit" class="login-menu__submit" [disabled]="loginLoading()">
          <span *ngIf="!loginLoading()">Acceder</span>
          <span *ngIf="loginLoading()">Accediendo...</span>
        </button>

        <p class="login-menu__error login-menu__error--global" *ngIf="loginErrorMessage()">{{ loginErrorMessage() }}</p>
      </form>

      <form *ngIf="activeTab() === 'register'" class="login-menu__form" [formGroup]="registerForm"
        (ngSubmit)="submitRegistration()" novalidate role="tabpanel" id="registerPanel" aria-labelledby="registerTab">
        <div class="login-menu__field">
          <label for="registerEmail">Correo electr√≥nico</label>
          <input id="registerEmail" type="email" formControlName="email" autocomplete="email"
            [class.is-invalid]="registerEmailControl.invalid && (registerEmailControl.dirty || registerEmailControl.touched)" />
          <span class="login-menu__error"
            *ngIf="registerEmailControl.hasError('required') && (registerEmailControl.dirty || registerEmailControl.touched)">
            El correo es obligatorio.
          </span>
          <span class="login-menu__error"
            *ngIf="registerEmailControl.hasError('email') && registerEmailControl.touched">
            Ingresa un correo electr√≥nico v√°lido.
          </span>
        </div>

        <div class="login-menu__field">
          <label for="registerPassword">Contrase√±a</label>
          <input id="registerPassword" type="password" formControlName="password" autocomplete="new-password"
            [class.is-invalid]="registerPasswordControl.invalid && (registerPasswordControl.dirty || registerPasswordControl.touched)" />
          <span class="login-menu__error"
            *ngIf="registerPasswordControl.hasError('required') && (registerPasswordControl.dirty || registerPasswordControl.touched)">
            La contrase√±a es obligatoria.
          </span>
          <span class="login-menu__error"
            *ngIf="registerPasswordControl.hasError('minlength') && registerPasswordControl.touched">
            Debe contener al menos 6 caracteres.
          </span>
        </div>

        <div class="login-menu__field">
          <label for="registerPasswordConfirmation">Confirma tu contrase√±a</label>
          <input id="registerPasswordConfirmation" type="password" formControlName="passwordConfirmation"
            autocomplete="new-password" [class.is-invalid]="
              registerPasswordConfirmationControl.invalid &&
              (registerPasswordConfirmationControl.dirty || registerPasswordConfirmationControl.touched)
            " />
          <span class="login-menu__error" *ngIf="
              registerPasswordConfirmationControl.hasError('required') &&
              (registerPasswordConfirmationControl.dirty || registerPasswordConfirmationControl.touched)
            ">
            Debes confirmar la contrase√±a.
          </span>
          <span class="login-menu__error" *ngIf="
              registerForm.hasError('passwordMismatch') &&
              registerPasswordConfirmationControl.touched &&
              !registerPasswordConfirmationControl.hasError('required')
            ">
            Las contrase√±as deben coincidir.
          </span>
        </div>

        <button type="submit" class="login-menu__submit" [disabled]="registerLoading()">
          <span *ngIf="!registerLoading()">Registrarme</span>
          <span *ngIf="registerLoading()">Creando cuenta...</span>
        </button>

        <p class="login-menu__error login-menu__error--global" *ngIf="registerErrorMessage()">{{ registerErrorMessage()
          }}</p>
      </form>
      <br>
      <p class="login-menu__register">
        <ng-container *ngIf="activeTab() === 'login'; else loginCta">
          ¬øNo tienes una cuenta?
          <a type="button" class="login-menu__register-link" (click)="switchToRegister()">Reg√≠strate</a>
        </ng-container>
        <ng-template #loginCta>
          ¬øYa tienes una cuenta?
          <a type="button" class="login-menu__register-link" (click)="switchToLogin()">Inicia sesi√≥n</a>
        </ng-template>
      </p>
    </div>
  </div>
</section>