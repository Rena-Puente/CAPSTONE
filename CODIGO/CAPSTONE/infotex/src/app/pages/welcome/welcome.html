<section class="welcome">
  <div class="welcome__container">
    <div class="welcome__card">
      <div class="welcome__chips" aria-hidden="true">
        <span class="chip chip--success">Beta 2025</span>
        <span class="chip chip--purple">Comunidad Dev</span>
        <span class="chip chip--ghost">100% gratis</span>
      </div>

      <h1 class="welcome__title">Bienvenido a InfoTex</h1>
      <p class="welcome__message">
        Esta es la zona de invitados. Inicia sesi√≥n para acceder al contenido completo de la plataforma.
      </p>

      <div class="welcome__highlights" aria-hidden="true">
        <div class="highlight">
          <div class="highlight__value">5K+</div>
          <div class="highlight__label">Desarrolladores</div>
        </div>
        <div class="highlight">
          <div class="highlight__value">450+</div>
          <div class="highlight__label">Proyectos</div>
        </div>
        <div class="highlight">
          <div class="highlight__value">120+</div>
          <div class="highlight__label">Empresas</div>
        </div>
      </div>

      <button type="button" class="welcome__cta" (click)="openMenu('login')">
        Iniciar sesi√≥n
      </button>

      <div class="welcome__subcta">
        ¬øNuevo por aqu√≠? <a href="#" (click)="openMenu('register'); $event.preventDefault()">Crea tu cuenta</a> en 30 segundos.
      </div>

      <div class="welcome__features" role="list" aria-label="Caracter√≠sticas principales">
        <article class="feature" role="listitem">
          <div class="feature__icon" aria-hidden="true">üß≠</div>
          <h3 class="feature__title">Matching transparente</h3>
          <p class="feature__text">Perfiles verificados y ofertas claras. Menos entrevistas eternas, m√°s contrataciones felices.</p>
        </article>
        <article class="feature" role="listitem">
          <div class="feature__icon" aria-hidden="true">üßë‚Äçü§ù‚Äçüßë</div>
          <h3 class="feature__title">Comunidad & eventos</h3>
          <p class="feature__text">Meetups y mentor√≠as para crecer tu red‚Äîy tu repositorio de stickers.</p>
        </article>
        <article class="feature" role="listitem">
          <div class="feature__icon" aria-hidden="true">üìä</div>
          <h3 class="feature__title">Datos para decidir</h3>
          <p class="feature__text">Tendencias de skills y salarios para mover tu carrera con cabeza (y con datos).</p>
        </article>
      </div>

      <div class="welcome__brands" aria-label="Empresas que conf√≠an en InfoTex">
        <span class="brands__label">Confiado por equipos de</span>
        <div class="brands__row" aria-hidden="true">
          <div class="brand-skel"></div>
          <div class="brand-skel"></div>
          <div class="brand-skel"></div>
          <div class="brand-skel"></div>
        </div>
      </div>
    </div>

    <!-- Banner promocional (‚Äúpublicidad‚Äù propia de la plataforma) -->
    <aside class="promo-banner" role="complementary" aria-label="Promoci√≥n destacada">
      <div class="promo-banner__content">
        <span class="promo-banner__badge">Nuevo</span>
        <h2 class="promo-banner__title">Hackweek InfoTex ¬∑ Noviembre</h2>
        <p class="promo-banner__text">
          S√∫mate al desaf√≠o de 7 d√≠as, participa por mentor√≠as y acceso prioritario a vacantes partner.
        </p>
      </div>
      <div class="promo-banner__actions">
        <button type="button" class="promo-banner__cta" (click)="openMenu()">Participar</button>
        <a routerLink="/about" class="promo-banner__link">M√°s info</a>
      </div>
    </aside>
  </div>

  <!-- Men√∫ de login (sin cambios funcionales) -->
  <div class="login-menu" *ngIf="isMenuOpen()">
    <div class="login-menu__backdrop" (click)="closeMenu()" aria-hidden="true"></div>
    <div
      class="login-menu__panel"
      role="dialog"
      aria-modal="true"
      aria-labelledby="loginMenuTitle"
      aria-describedby="loginMenuSubtitle"
      (click)="$event.stopPropagation()"
    >
      <button type="button" class="login-menu__close" (click)="closeMenu()" aria-label="Cerrar formulario">√ó</button>
      <div class="login-menu__avatar" aria-hidden="true">
        <span class="login-menu__avatar-icon">üë§</span>
      </div>
      <nav class="login-menu__tabs" role="tablist">
        <button
          type="button"
          class="login-menu__tab"
          [class.login-menu__tab--active]="activeTab() === 'login'"
          (click)="switchToLogin()"
          role="tab"
          [attr.aria-selected]="activeTab() === 'login'"
          aria-controls="loginPanel"
          id="loginTab"
        >
          Iniciar sesi√≥n
        </button>
        <button
          type="button"
          class="login-menu__tab"
          [class.login-menu__tab--active]="activeTab() === 'register'"
          (click)="switchToRegister()"
          role="tab"
          [attr.aria-selected]="activeTab() === 'register'"
          aria-controls="registerPanel"
          id="registerTab"
        >
          Crear cuenta
        </button>
      </nav>

      <h2 id="loginMenuTitle">{{ activeTab() === 'login' ? 'Bienvenido de nuevo' : 'Crea tu cuenta' }}</h2>
      <p class="login-menu__subtitle" id="loginMenuSubtitle">
        {{
          activeTab() === 'login'
            ? 'Introduce tus credenciales para acceder a InfoTex'
            : 'Registra tu correo y una contrase√±a segura para comenzar.'
        }}
      </p>

      <div class="login-menu__success" *ngIf="loginSuccessMessage() && activeTab() === 'login'" role="status">
        {{ loginSuccessMessage() }}
      </div>

      <form
        *ngIf="activeTab() === 'login'"
        class="login-menu__form"
        [formGroup]="loginForm"
        (ngSubmit)="submitLogin()"
        novalidate
        role="tabpanel"
        id="loginPanel"
        aria-labelledby="loginTab"
      >
        <div class="login-menu__field">
          <label for="loginEmail">Correo electr√≥nico</label>
          <input
            id="loginEmail"
            type="email"
            formControlName="email"
            autocomplete="email"
            [class.is-invalid]="emailControl.invalid && (emailControl.dirty || emailControl.touched)"
          />
          <span class="login-menu__error" *ngIf="emailControl.hasError('required') && (emailControl.dirty || emailControl.touched)">
            El correo es obligatorio.
          </span>
          <span class="login-menu__error" *ngIf="emailControl.hasError('email') && emailControl.touched">
            Ingresa un correo electr√≥nico v√°lido.
          </span>
        </div>

        <div class="login-menu__field">
          <label for="loginPassword">Contrase√±a</label>
          <input
            id="loginPassword"
            type="password"
            formControlName="password"
            autocomplete="current-password"
            [class.is-invalid]="passwordControl.invalid && (passwordControl.dirty || passwordControl.touched)"
          />
          <span class="login-menu__error" *ngIf="passwordControl.hasError('required') && (passwordControl.dirty || passwordControl.touched)">
            La contrase√±a es obligatoria.
          </span>
          <span class="login-menu__error" *ngIf="passwordControl.hasError('minlength') && passwordControl.touched">
            Debe contener al menos 6 caracteres.
          </span>
        </div>

        <div class="login-menu__options">
          <label class="login-menu__remember">
            <input type="checkbox" />
            <span>Recordarme</span>
          </label>
          <a class="login-menu__link" href="#">¬øOlvidaste tu contrase√±a?</a>
        </div>

        <button type="submit" class="login-menu__submit" [disabled]="loginLoading()">
          <span *ngIf="!loginLoading()">Acceder</span>
          <span *ngIf="loginLoading()">Accediendo...</span>
        </button>

        <p class="login-menu__error login-menu__error--global" *ngIf="loginErrorMessage()">{{ loginErrorMessage() }}</p>
      </form>

      <form
        *ngIf="activeTab() === 'register'"
        class="login-menu__form"
        [formGroup]="registerForm"
        (ngSubmit)="submitRegistration()"
        novalidate
        role="tabpanel"
        id="registerPanel"
        aria-labelledby="registerTab"
      >
        <div class="login-menu__field">
          <label for="registerEmail">Correo electr√≥nico</label>
          <input
            id="registerEmail"
            type="email"
            formControlName="email"
            autocomplete="email"
            [class.is-invalid]="registerEmailControl.invalid && (registerEmailControl.dirty || registerEmailControl.touched)"
          />
          <span class="login-menu__error" *ngIf="registerEmailControl.hasError('required') && (registerEmailControl.dirty || registerEmailControl.touched)">
            El correo es obligatorio.
          </span>
          <span class="login-menu__error" *ngIf="registerEmailControl.hasError('email') && registerEmailControl.touched">
            Ingresa un correo electr√≥nico v√°lido.
          </span>
        </div>

        <div class="login-menu__field">
          <label for="registerPassword">Contrase√±a</label>
          <input
            id="registerPassword"
            type="password"
            formControlName="password"
            autocomplete="new-password"
            [class.is-invalid]="registerPasswordControl.invalid && (registerPasswordControl.dirty || registerPasswordControl.touched)"
          />
          <span class="login-menu__error" *ngIf="registerPasswordControl.hasError('required') && (registerPasswordControl.dirty || registerPasswordControl.touched)">
            La contrase√±a es obligatoria.
          </span>
          <span class="login-menu__error" *ngIf="registerPasswordControl.hasError('minlength') && registerPasswordControl.touched">
            Debe contener al menos 6 caracteres.
          </span>
        </div>

        <div class="login-menu__field">
          <label for="registerPasswordConfirmation">Confirma tu contrase√±a</label>
          <input
            id="registerPasswordConfirmation"
            type="password"
            formControlName="passwordConfirmation"
            autocomplete="new-password"
            [class.is-invalid]="
              registerPasswordConfirmationControl.invalid &&
              (registerPasswordConfirmationControl.dirty || registerPasswordConfirmationControl.touched)
            "
          />
          <span
            class="login-menu__error"
            *ngIf="
              registerPasswordConfirmationControl.hasError('required') &&
              (registerPasswordConfirmationControl.dirty || registerPasswordConfirmationControl.touched)
            "
          >
            Debes confirmar la contrase√±a.
          </span>
          <span
            class="login-menu__error"
            *ngIf="
              registerForm.hasError('passwordMismatch') &&
              registerPasswordConfirmationControl.touched &&
              !registerPasswordConfirmationControl.hasError('required')
            "
          >
            Las contrase√±as deben coincidir.
          </span>
        </div>

        <button type="submit" class="login-menu__submit" [disabled]="registerLoading()">
          <span *ngIf="!registerLoading()">Registrarme</span>
          <span *ngIf="registerLoading()">Creando cuenta...</span>
        </button>

        <p class="login-menu__error login-menu__error--global" *ngIf="registerErrorMessage()">{{ registerErrorMessage() }}</p>
      </form>

      <p class="login-menu__register">
        <ng-container *ngIf="activeTab() === 'login'; else loginCta">
          ¬øNo tienes una cuenta?
          <button type="button" class="login-menu__register-link" (click)="switchToRegister()">Reg√≠strate</button>
        </ng-container>
        <ng-template #loginCta>
          ¬øYa tienes una cuenta?
          <button type="button" class="login-menu__register-link" (click)="switchToLogin()">Inicia sesi√≥n</button>
        </ng-template>
      </p>
    </div>
  </div>
</section>
