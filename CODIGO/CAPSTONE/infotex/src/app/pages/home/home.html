<br>

<div class="container container-narrow py-4">
  <!-- Barra de acciones -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div class="text-muted small fst-italic"></div>
    <div>
      <button class="btn btn-sm btn-primary me-2" (click)="runCommand()">Ejecutar</button>
      <button class="btn btn-sm btn-outline-secondary" (click)="loadPosts()">Refrescar (g r)</button>
    </div>
  </div>

  <!-- Lista estilo GitHub -->
  <div class="gh-card">
    <div class="gh-card-header">
      <i class="bi bi-activity"></i>
      <span class="hdr-title">Trending repositories</span>
      <a class="see-more ms-2" href="javascript:void(0)">See more</a>
      <div class="ms-auto">
        <button class="btn btn-sm btn-outline-secondary">
          <i class="bi bi-three-dots"></i>
        </button>
      </div>
    </div>

    @for (p of posts(); track p.id; let last = $last) {
      <div class="gh-item">
        <!-- izquierda -->
        <div class="gh-item-main">
          <img [src]="p.avatarUrl" alt="avatar" class="avatar" />
          <div class="item-text">
            <a class="repo-title" href="javascript:void(0)">{{ p.title }}</a>
            <div class="muted small mt-1">
              #{{ p.id }} abierto por <strong>{{ p.author }}</strong> Â· hace {{ timeAgo(p.createdAt) }}
            </div>
            <div class="tags mt-2">
              @for (t of p.tags; track t) {
                <span class="badge tag me-1" [ngClass]="borderTag(t)">{{ t }}</span>
              }
            </div>
          </div>
        </div>

        <!-- derecha -->
        <div class="gh-item-actions">
          <div class="btn-group">
            <button class="btn btn-sm btn-outline-secondary">
              <i class="bi bi-star me-1"></i> Star
            </button>
            <button class="btn btn-sm btn-outline-secondary dropdown-toggle dropdown-toggle-split"></button>
          </div>
          <div class="numbers text-muted small">
            <span><i class="bi bi-emoji-smile me-1"></i>{{ p.reactions }}</span>
            <span><i class="bi bi-chat me-1"></i>{{ p.comments }}</span>
          </div>
        </div>
      </div>

      @if (!last) { <div class="gh-divider"></div> }
    }
  </div>
</div>